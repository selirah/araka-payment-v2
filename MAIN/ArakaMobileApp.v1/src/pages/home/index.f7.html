<template>
  <div class="page" data-name="home">
    <div class="navbar">
      <div class="navbar-bg"></div>
      <div class="navbar-inner sliding">
        <div class="right">
          <a class="link popover-open" href="#" data-popover=".popover-links">
            <i class="icon f7-icons">ellipsis_vertical</i>
            <span class="if-not-md">Menu</span>
          </a>
        </div>
      </div>
    </div>
    <!-- <div class="navbar navbar-transparent">
      <div class="navbar-bg"></div>
      <div class="navbar-inner sliding">
          <div class="left">
              <a href="#" class="link back">
                  <i class="icon icon-back text-color-brown"></i>
                  <span class="if-not-md">Back</span>
              </a>
          </div>
      </div>
    </div> -->
    <!-- FAB Backdrop -->
  <!-- <div class="fab-backdrop"></div> -->
    <div class="toolbar toolbar-bottom tabbar tabbar-labels araka-toolbar">
      <div class="toolbar-inner">
        <a href="/" class="tab-link" data-route-tab-id="start">
          <i class="icon f7-icons">house_fill</i>
          <span class="tabbar-label">Home</span>
        </a>
        <!-- <span class="tab-link blank"></span> -->
        <a href="#" class="tab-link payActions" @click="showActions">
          <i class="icon f7-icons">money_dollar_circle_fill</i>
          <span class="tabbar-label">Pay</span>
        </a>
        <a href="/transfers/" class="tab-link" data-route-tab-id="profile">
          <i class="icon f7-icons">arrow_up_right</i>
          <span class="tabbar-label">Transfer</span>
        </a>
        <a href="/account/" class="tab-link" data-route-tab-id="account">
          <i class="icon f7-icons">person_fill</i>
          <span class="tabbar-label">Account</span>
        </a>
      </div>
    </div>
    <!-- <div class="fab fab-center-bottom start-fab">
      <a href="#">
        <i class="icon f7-icons">money_dollar</i>
        <i class="icon f7-icons">xmark</i>
      </a>
      <div class="fab-buttons fab-buttons-top">
        <a href="/fees/" class="fab-label-button">
          <span>School Fees Payment</span>
          <i class="icon f7-icons">tickets</i>
        </a>
        <a href="/subscriptions/" class="fab-label-button">
          <span>TV Subscriptions</span>
          <i class="icon f7-icons">tv_fill</i>
        </a>
        <a href="/transfers/" class="fab-label-button">
          <span>Money Transfers</span>
          <i class="icon f7-icons">money_dollar</i>
        </a>
        <a href="/airtime/" class="fab-label-button">
         <span>Airtime Top-Up</span>
         <i class="icon f7-icons">device_phone_portrait</i>
        </a>
      </div>
    </div> -->
    <div class="tabs tab-routable">
      <div class="page-content tab hide-toolbar-on-scroll hide-navbar-on-scroll" id="start"></div>
      <div class="page-content tab hide-toolbar-on-scroll hide-navbar-on-scroll" id="receipients"></div>
      <div class="page-content tab hide-toolbar-on-scroll hide-navbar-on-scroll" id="account"></div>
      <div class="page-content tab hide-toolbar-on-scroll hide-navbar-on-scroll" id="profile"></div>
    </div>

    <!-- popover -->
    <div class="popover popover-links">
      <div class="popover-inner">
        <div class="list">
          <ul>
            <li><a class="list-button item-link link popover-close" href="/receipients/">Receipients</a></li>
            <!-- <li><a class="list-button item-link link popover-close" href="/profile/">Profile</a></li> -->
            <li><a class="list-button item-link link popover-close" href="#" @click="logout">Logout</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div> 
</template>
<script>
  import accountImg from '../../images/user.png';
  import app from '../../js/app.js';
  import $$ from 'dom7';
  import axios from 'axios';
  import dayjs from 'dayjs';

  console.log(dayjs);

  

  $$('a.tab-link.payActions').on('click', function(e) {
    e.preventDefault();
    // payActions.open();
    console.log('load pay actions')
  })

export default {
  data() {
    return {
      userData: localStorage.getItem('loginData') ? JSON.parse(localStorage.getItem('loginData')) : null,
      isLoggedIn: localStorage.getItem('isLoggedIn') ? localStorage.getItem('isLoggedIn') : false,
    }
  },
  methods: {
    showActions(e) {
      e.preventDefault();
      console.log('show action sheet');
      let payActions = app.actions.create({
      buttons: [
        {
          text: 'School Fees Payment',
          onClick: function () {
            app.views.main.router.navigate('/fees/')
          }
        },
        {
          text: 'TV Subscriptions',
          onClick: function () {
            app.views.main.router.navigate('/subscriptions/')
          }
        },
        {
          text: 'Money Transfers',
          onClick: function () {
            app.views.main.router.navigate('/transfers/')
          }
        },
        {
          text: 'Airtime Topup',
          onClick: function () {
            app.views.main.router.navigate('/airtime/')
          }
        },
      ]
      });
      payActions.open();
    },
    logout(e) {
      e.preventDefault();
      localStorage.clear();
      app.views.main.router.navigate('/welcome/');
      // window.location.reload();
    }
  }
}
</script>